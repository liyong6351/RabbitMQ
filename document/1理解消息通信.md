<!-- TOC -->

- [概览](#概览)
    - [1 消费者和生产者](#1-消费者和生产者)
        - [1.1 生产者到消费者的信息流](#11-生产者到消费者的信息流)
        - [1.2 信道的概念](#12-信道的概念)
        - [1.3 队列](#13-队列)

<!-- /TOC -->

# 概览

本章将讲解消息通信的基本概念，以及RabbitMQ在实现中的细节

## 1 消费者和生产者

```
RabbitMQ中的消息分为两部分，payload和label
payload包含的是数据的详细内容，甚至包含生产者信息
label用于界定此消息的路由规则
```

### 1.1 生产者到消费者的信息流

前缀解读:  
p 生产者  
r RabbitMQ  
c 消费者  

```
p数据 -> p创建信息流 -> p消息 -> p发布消息 -> r存储消息 ->
r推送消息 -> c监听消息 -> c消息 -> c读取消息 -> c解析数据
```

### 1.2 信道的概念

```
不论是生产者和消费者，在通过RabbitMQ进行交互时都需要建立服务器和
RabbitMQ应用之间的连接，这个连接建立是基于TCP连接之上的，也就是说
这个连接是存在于TCP连接之内的虚拟连接，我们称之为信道。一条TCP连接可以
包含成千上万条信道，如此可以解决服务器连接性能的问题
```

### 1.3 队列

```
AMQP的消息路由必须由三部分组成: 交换器(Exchange)、队列和绑定
生产者将消息发布到交换机上；最后达到队列，冰杯消费者消费。在这个
过程中绑定决定了消息如何从路由器路由到特定的队列

消费者消费消息分为两种:
basic.consume进行订阅，可以持续的消费消息
basic.get获取一条消息，之后取消订阅

多个消费者订阅分发模式:
队列接收到的消息将以循环的方式发送给消费者
```